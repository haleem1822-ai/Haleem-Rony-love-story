<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Haleem & Rony ğŸ’œ</title>
  <style>
    body {
      font-family: "Georgia", serif;
      background: #fdf6f9;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    h1 {
      color: #8e44ad;
      margin-top: 20px;
    }
    .login-box {
      margin-top: 100px;
    }
    input {
      padding: 10px;
      margin: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      width: 200px;
    }
    button {
      padding: 10px 20px;
      border: none;
      background: #8e44ad;
      color: #fff;
      border-radius: 5px;
      cursor: pointer;
    }
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    /* Ø´ÙƒÙ„ Ø§Ù„ÙƒØªØ§Ø¨ */
    .book {
      width: 70%;
      margin: 20px auto;
      padding: 30px;
      border: 3px solid #d4af37;
      border-radius: 12px;
      background: #fff;
      box-shadow: 0 5px 20px rgba(0,0,0,0.2);
      display: flex;
      justify-content: space-between;
    }
    .page {
      width: 48%;
      padding: 15px;
      border-left: 2px dashed #d4af37;
      text-align: left;
    }
    textarea {
      width: 100%;
      height: 200px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      resize: none;
      font-family: "Georgia", serif;
    }
    .timer {
      margin-top: 10px;
      font-weight: bold;
      color: #e67e22;
    }
  </style>
</head>
<body>

  <h1>Haleem & Rony ğŸ’œ</h1>

  <!-- ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <div class="login-box" id="loginBox">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username"><br>
    <input type="password" id="password" placeholder="Password"><br>
    <button onclick="login()">Login</button>
    <p id="error" style="color:red;"></p>
  </div>

  <!-- Ø§Ù„ÙƒØªØ§Ø¨ -->
  <div id="bookBox" style="display:none;">
    <div class="book">
      <!-- ØµÙØ­ØªÙŠ -->
      <div class="page" id="myPage">
        <h2 id="myTitle"></h2>
        <textarea id="myText"></textarea><br>
        <button onclick="saveMyPage()">Save</button>
      </div>

      <!-- ØµÙØ­Ø© Ø§Ù„Ø­Ø¨ÙŠØ¨ -->
      <div class="page" id="loverPage">
        <h2 id="loverTitle"></h2>
        <div id="loverContent" style="display:none;">
          <p id="loverSaved"></p>
        </div>
        <button id="openBtn" onclick="openLover()">Open Lover's Page</button>
        <p class="timer" id="timerText"></p>
      </div>
    </div>
  </div>

  <script>
    const users = {
      "Haleem1822": "ronyismyqueen",
      "Rony138": "haleemâ€™s queen"
    };

    let currentUser = null;
    let myKey = "";
    let loverKey = "";

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    function login() {
      const user = document.getElementById("username").value.trim();
      const pass = document.getElementById("password").value.trim();
      if (users[user] && users[user] === pass) {
        currentUser = user;
        setupBook();
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("bookBox").style.display = "block";
      } else {
        document.getElementById("error").textContent = "âŒ Wrong username or password!";
      }
    }

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒØªØ§Ø¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function setupBook() {
      if (currentUser === "Haleem1822") {
        myKey = "haleemText";
        loverKey = "ronyText";
        document.getElementById("myTitle").textContent = "ğŸ“– Haleem's Page";
        document.getElementById("loverTitle").textContent = "ğŸ’Œ Rony's Page";
      } else {
        myKey = "ronyText";
        loverKey = "haleemText";
        document.getElementById("myTitle").textContent = "ğŸ“– Rony's Page";
        document.getElementById("loverTitle").textContent = "ğŸ’Œ Haleem's Page";
      }

      // ØªØ­Ù…ÙŠÙ„ ØµÙØ­ØªÙŠ
      const saved = localStorage.getItem(myKey);
      if (saved) document.getElementById("myText").value = saved;

      // ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø© Ø§Ù„Ø­Ø¨ÙŠØ¨ Ù„Ùˆ Ø§ØªÙØªØ­Øª Ù‚Ø¨Ù„ ÙƒØ¯Ù‡
      checkTimer();
    }

    // Ø­ÙØ¸ ØµÙØ­ØªÙŠ
    function saveMyPage() {
      const text = document.getElementById("myText").value;
      localStorage.setItem(myKey, text);
      alert("Saved!");
    }

    // ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø­Ø¨ÙŠØ¨
    function openLover() {
      const now = new Date().getTime();
      localStorage.setItem(currentUser + "_lastOpen", now);
      document.getElementById("loverContent").style.display = "block";
      document.getElementById("loverSaved").textContent = localStorage.getItem(loverKey) || "No notes yet...";
      document.getElementById("openBtn").disabled = true;
      updateTimer(7*24*60*60*1000);
    }

    // Ø§Ù„ØªØ§ÙŠÙ…Ø±
    function checkTimer() {
      const lastOpen = localStorage.getItem(currentUser + "_lastOpen");
      if (lastOpen) {
        const now = new Date().getTime();
        const diff = now - lastOpen;
        const week = 7*24*60*60*1000;
        if (diff < week) {
          document.getElementById("openBtn").disabled = true;
          updateTimer(week - diff);
        }
      }
    }

    function updateTimer(ms) {
      const timer = document.getElementById("timerText");
      let sec = Math.floor(ms/1000);
      function tick() {
        let days = Math.floor(sec / 86400);
        let hours = Math.floor((sec % 86400) / 3600);
        let minutes = Math.floor((sec % 3600) / 60);
        let seconds = sec % 60;
        timer.textContent = `Available in: ${days}d ${hours}h ${minutes}m ${seconds}s`;
        sec--;
        if (sec >= 0) setTimeout(tick, 1000);
      }
      tick();
    }
  </script>
</body>
</html>
