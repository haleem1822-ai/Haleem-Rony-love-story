<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Haleem & Rony 💜</title>
  <style>
    body {
      font-family: "Georgia", serif;
      background: #fdf6f9;
      text-align: center;
    }
    h1 {
      color: #8e44ad;
    }
    .book {
      width: 70%;
      margin: 20px auto;
      padding: 20px;
      border: 2px solid #d4af37;
      border-radius: 12px;
      background: #fff;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    textarea {
      width: 100%;
      height: 200px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      resize: none;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      border: none;
      background: #8e44ad;
      color: #fff;
      border-radius: 5px;
      cursor: pointer;
    }
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .timer {
      margin-top: 10px;
      font-weight: bold;
      color: #e67e22;
    }
  </style>
</head>
<body>

  <h1>Haleem & Rony 💜</h1>

  <!-- كتاب Haleem -->
  <div class="book">
    <h2>📖 Haleem's Book</h2>
    <textarea id="haleemBook" placeholder="Write your thoughts here..."></textarea><br>
    <button onclick="saveBook('haleemBook')">Save</button>
  </div>

  <!-- كتاب Rony -->
  <div class="book">
    <h2>💌 Rony's Book</h2>
    <div id="ronyContent" style="display:none;">
      <p>This is Rony's secret book content... 💕</p>
    </div>
    <button id="openRonyBtn" onclick="openRonyBook()">Open Rony's Book</button>
    <p class="timer" id="timerText"></p>
  </div>

  <script>
    // حفظ أي كتاب
    function saveBook(id) {
      const text = document.getElementById(id).value;
      localStorage.setItem(id, text);
      alert("Saved!");
    }

    // تحميل المحتوى لو موجود
    window.onload = function() {
      const haleemSaved = localStorage.getItem("haleemBook");
      if (haleemSaved) document.getElementById("haleemBook").value = haleemSaved;

      checkTimer();
    }

    // كتاب Rony يتفتح مرة كل أسبوع
    function openRonyBook() {
      const now = new Date().getTime();
      localStorage.setItem("ronyLastOpen", now);
      document.getElementById("ronyContent").style.display = "block";
      document.getElementById("openRonyBtn").disabled = true;
      updateTimer(7*24*60*60*1000);
    }

    function checkTimer() {
      const lastOpen = localStorage.getItem("ronyLastOpen");
      if (lastOpen) {
        const now = new Date().getTime();
        const diff = now - lastOpen;
        const week = 7*24*60*60*1000;
        if (diff < week) {
          document.getElementById("openRonyBtn").disabled = true;
          updateTimer(week - diff);
        }
      }
    }

    function updateTimer(ms) {
      const timer = document.getElementById("timerText");
      let sec = Math.floor(ms/1000);
      function tick() {
        let days = Math.floor(sec / 86400);
        let hours = Math.floor((sec % 86400) / 3600);
        let minutes = Math.floor((sec % 3600) / 60);
        let seconds = sec % 60;
        timer.textContent = `Available in: ${days}d ${hours}h ${minutes}m ${seconds}s`;
        sec--;
        if (sec >= 0) setTimeout(tick, 1000);
      }
      tick();
    }
  </script>

</body>
</html>
